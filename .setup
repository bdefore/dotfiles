# install homebrew
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# install common dev tools
./.brew

# install rvm: (it may tell you that git requires installing command line tools, accept that)
\curl -sSL https://get.rvm.io | bash

# source the rvm
source ~/.rvm/scripts/rvm

# install latest ruby
rvm install 2.4.1

# install homesick and get your dotfiles:
gem install homesick

# Clone dotfiles (overwrite all except .ssh - that should be removed from dotfiles at some point)
homesick clone https://github.com/bdefore/dotfiles.git
homesick symlink dotfiles

# Update
source ~/.bash_profile

# install nvm and node
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.29.0/install.sh | bash
source ~/.bashrc
nvm install 8.0.0
nvm use 8.0.0

# install common node tools
./.npm

# setup osx preferences:
./.osx

# install brew cask:
brew tap phinze/cask
brew install brew-cask
brew tap caskroom/versions

# Use cask to install the apps you use (and take a coffee break):
./.cask

# Setup Sublime Text
SUBLIME_SUPPORT=~/Library/Application\ Support/Sublime\ Text\ 3
git clone https://github.com/aponxi/sublime-better-coffeescript.git "$SUBLIME_SUPPORT"/Packages/Better\ CoffeeScript
mkdir -p "$SUBLIME_SUPPORT"/Installed\ Packages
curl https://packagecontrol.io/Package%20Control.sublime-package > "$SUBLIME_SUPPORT"/Installed\ Packages/Package\ Control.sublime-package
wget https://github.com/kkga/spacegray/archive/master.zip && unzip master.zip && mv spacegray-master "$SUBLIME_SUPPORT"/Packages/Theme\ -\ Spacegray
mkdir -p "$SUBLIME_SUPPORT"/Packages/User
ln -s ~/.sublime_preferences "$SUBLIME_SUPPORT"/Packages/User/Preferences.sublime-settings
ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" ~/bin/subl

# log out, back in again
# osascript -e 'tell app "System Events" to log out'
